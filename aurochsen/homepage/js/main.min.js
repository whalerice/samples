function initSmoke(){for(let e=0;e<smokeInfo.length;e++){const t=smokeInfo[e];t.objs.canvas.getContext("2d").clearRect(0,0,0,0)}smokeInfo.forEach(e=>{const t=e.objs.canvas,o=e.objs.party,n=e.objs.img,i=e.values;o.setPreDrawCallback(()=>{const e=n.offsetLeft+n.width*i.x/i.width,r=n.offsetTop+n.height*i.y/i.height;t.width=innerWidth,t.height=innerHeight,o.addSmoke(e,r,.1)})})}import{Curtains}from"./curtains/src/index.mjs";import{initCurtain}from"./curtains/plane.min.js";const splideState={type:"fade",autoplay:!0,interval:7e3,pauseOnHover:!1,pauseOnFocus:!1,pagination:!1,rewind:!0,easing:"cubic-bezier(0.25, 0.25, 0.75, 0.75)"},splide=new Splide(".splide",splideState).mount(),bar=splide.root.querySelector(".slider-progress-bar"),header=document.querySelector(".header"),end=splide.Components.Controller.getEnd()+1,smokeInfo=[{objs:{canvas:document.querySelector("#smoke1"),img:document.querySelector(".img-1"),party:smokemachine(document.querySelector("#smoke1").getContext("2d"),[255,255,255])},values:{x:433,y:391,width:700,height:699}},{objs:{canvas:document.querySelector("#smoke2"),img:document.querySelector(".img-2"),party:smokemachine(document.querySelector("#smoke2").getContext("2d"),[255,255,255])},values:{x:378,y:671,width:1067,height:988}},{objs:{canvas:document.querySelector("#smoke3"),img:document.querySelector(".img-3"),party:smokemachine(document.querySelector("#smoke3").getContext("2d"),[255,255,255])},values:{x:409,y:601,width:1400,height:1230}},{objs:{canvas:document.querySelector("#smoke4"),img:document.querySelector(".img-4"),party:smokemachine(document.querySelector("#smoke4").getContext("2d"),[255,255,255])},values:{x:534,y:647,width:1200,height:871}},{objs:{canvas:document.querySelector("#smoke5"),img:document.querySelector(".img-5"),party:smokemachine(document.querySelector("#smoke5").getContext("2d"),[255,255,255])},values:{x:165,y:493,width:1400,height:959}},{objs:{canvas:document.querySelector("#smoke6"),img:document.querySelector(".img-6"),party:smokemachine(document.querySelector("#smoke6").getContext("2d"),[255,255,255])},values:{x:256,y:604,width:600,height:976}},{objs:{canvas:document.querySelector("#smoke7"),img:document.querySelector(".img-7"),party:smokemachine(document.querySelector("#smoke7").getContext("2d"),[255,255,255])},values:{x:1040,y:867,width:1761,height:1085}},{objs:{canvas:document.querySelector("#smoke8"),img:document.querySelector(".img-8"),party:smokemachine(document.querySelector("#smoke8").getContext("2d"),[255,255,255])},values:{x:511,y:677,width:1e3,height:938}},{objs:{canvas:document.querySelector("#smoke9"),img:document.querySelector(".img-9"),party:smokemachine(document.querySelector("#smoke9").getContext("2d"),[255,255,255])},values:{x:759,y:555,width:1100,height:956}}];splide.on("move",function(e,t){bar.style.width=String(100*(e+1)/end)+"%",9!==t&&smokeInfo[t].objs.party.stop(),9!==e&&smokeInfo[e].objs.party.start(),9===e?(curtainsA.clearDepth(),curtainsA.disableDrawing(),header.classList.add("hide"),curtainsB.enableDrawing()):(curtainsA.enableDrawing(),header.classList.remove("hide"),curtainsB.clearDepth(),curtainsB.disableDrawing())}),splide.on("resized",function(){initSmoke()});const curtainsA=new Curtains({container:"canvas",premultipliedAlpha:!0,pixelRatio:Math.min(1.5,window.devicePixelRatio)}),curtainsB=new Curtains({container:"canvas2",premultipliedAlpha:!0,pixelRatio:Math.min(1.5,window.devicePixelRatio)});window.addEventListener("load",()=>{bar.style.width=String(100/end)+"%",initCurtain(curtainsA,"curtain","header"),initCurtain(curtainsB,"curtain2","simbolbox"),initSmoke();for(let e=0;e<smokeInfo.length;e++){const t=smokeInfo[e];t.objs.party.stop()}smokeInfo[0].objs.party.start(),document.body.addEventListener("contextmenu",e=>{e.preventDefault()})});